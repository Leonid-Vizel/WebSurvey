@using WebSurvey.Models.ViewModel
@model CreateSurveyModel
@{
    ViewData["Title"] = "Создание опроса";
}

<script id="blockOfStuff" type="text/html">
    <h5>TEST {questionCount}</h5>
</script>

<script>
        let questionCount = 0;

        function OnPasswordNeeded()
        {
            var hidingBlock = document.getElementById('hidingBlock');
            if (document.getElementById('checkHidingBlock').checked)
            {
                hidingBlock.removeAttribute('hidden');
            }
            else
            {
                hidingBlock.setAttribute('hidden','hidden');
            }
        }

        function AddQuestion()
        {
            var div = document.createElement('div');
            div.setAttribute('class', 'container');
            var elementAfter = document.getElementById('addQuestionBtn');
            div.innerHTML = document.getElementById('blockOfStuff').innerHTML;

            div.innerHTML = div.innerHTML
            .replace(/{questionCount}/g, questionCount);
            questionCount = questionCount + 1;

            elementAfter.insertAdjacentElement('beforebegin', div);
        }
</script>

<h2>Создание опроса</h2>
<hr />
<div class="container">
    <div class="row">
        <label asp-for="Name"></label>
        <input asp-for="Name" class="form-control" />
        <span asp-validation-for="Name"></span>
    </div>
</div>
<div class="container">
    <div class="row">
        <label asp-for="Description"></label>
        @Html.TextAreaFor(x=>x.Description)
        <span asp-validation-for="Description"></span>
    </div>
</div>
<hr />
<h2>Настройки</h2>
<div class="form-check">
    <input asp-for="IsAnonimous" class="form-check-input" type="checkbox" id="anonBox" onchange="CheckAnonimOneOff()">
    <label asp-for="IsAnonimous" class="form-check-label"></label>
</div>
<div class="form-check">
    <input asp-for="IsOneOff" class="form-check-input" type="checkbox" id="oneBox" onchange="CheckAnonimOneOff()">
    <label asp-for="IsOneOff" class="form-check-label"></label>
</div>
<div class="form-check">
    <input asp-for="IsPassworded" class="form-check-input" type="checkbox" id="checkHidingBlock" onchange="OnPasswordNeeded()">
    <label asp-for="IsPassworded" class="form-check-label"></label>
</div>
<div id="hidingBlock" hidden="hidden">
    <label asp-for="Password"></label>
    <input asp-for="Password" class="form-control" />
    <span asp-validation-for="Password"></span>
</div>
<hr />
<a class="btn btn-outline-info" id="addQuestionBtn" onclick="AddQuestion()">Добавить вопрос</a>